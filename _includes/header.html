<!doctype html>
<html lang="en" class="no-js" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        {%- capture title -%}
            {{ site.name }} â€” {% if page.slug == "home" %}{{ site.description }}{% else %}{{ page.title }}{% endif %}
        {%- endcapture -%}
        <title>{{ title }}</title>

        {%- capture meta_description -%}
            {% if page.description %}{{ page.description }}{% if paginator.page and paginator.page != 1 %} - Page {{ paginator.page }}{% endif%}{% elsif page.excerpt %}{{ page.excerpt | newline_to_br | replace: '<br />', ' ' | strip_html | strip_newlines | replace: '    ', ' ' | rstrip | truncate: 155 }}{% else %}{{ site.description }}{% endif %}
        {%- endcapture -%}
        <meta name="description" content="{{ meta_description }}">
        <meta name="generator" content="Jekyll v{{ jekyll.version }}">
        <meta name="referrer" content="strict-origin-when-cross-origin">

        <link rel="canonical" href="{{ site.url }}{{ page.url }}">

        <link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com">
        <link rel="dns-prefetch" href="//code.jquery.com">
        <link rel="dns-prefetch" href="//fonts.googleapis.com">

        {%- if page.slug == "home" -%}
        <link rel="preload" href="/assets/img/landing-page-bkg.jpg" as="image" media="(min-width: 768px)">
        <link rel="preload" href="/assets/img/landing-page-bkg-small.jpg" as="image" media="(max-width: 767px)">
        {%- endif -%}

        <noscript>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans%7CShare+Tech+Mono">
        </noscript>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

        <style>
        {%- capture include_to_scssify -%}
            {%- include assets/_style.scss -%}

            {%- if page.slug == "tickets" -%}
            {%- include assets/_tickets.scss -%}
            {%- endif -%}
        {%- endcapture -%}
        {{- include_to_scssify | scssify -}}
        </style>

        <script>
            {%- include assets/nojs.js -%}
            {%- include assets/loadjs.min.js -%}

            var googleFont = 'https://fonts.googleapis.com/css?family=Open+Sans%7CShare+Tech+Mono';
            var cookieConsentCss = '{{ site.assets.cookieConsent.css }}';
            var cookieConsentJs = '{{ site.assets.cookieConsent.js }}';
            var jquery = '{{ site.assets.jquery }}';
            var jqueryIntegrity = '{{ site.assets.jquery_integrity }}';
            var bootstrapBundle = '{{ site.assets.bootstrapBundle }}';
            var bootstrapIntegrity = '{{ site.assets.bootstrapBundleIntegrity }}';

            {%- if page.slug == 'tickets' -%}
                var ticketsCarousel = '/assets/js/tickets-carousel.js';
            {%- endif -%}

            {%- assign baseBundleItems = 'jquery, bootstrapBundle' -%}

            {%- if page.slug == 'tickets' -%}
                {%- assign bundleItems = baseBundleItems | append: ', ticketsCarousel' -%}
            {%- else -%}
                {%- assign bundleItems = baseBundleItems -%}
            {%- endif -%}

            loadjs(['css!' + googleFont, 'css!' + cookieConsentCss]);
            loadjs([{{ bundleItems }}], 'jsBundle', {
                async: false,
                before: function(path, scriptEl) {
                    if (path === jquery) {
                        scriptEl.integrity = jqueryIntegrity;
                    } else if (path === bootstrapBundle) {
                        scriptEl.integrity = bootstrapIntegrity;
                    }
                    scriptEl.crossOrigin = true;
                }
            });
            loadjs(cookieConsentJs, 'cookieConsent', {
                success: function() {
                    window.addEventListener('load', function() {
                      window.cookieconsent.initialise({
                        'palette': {
                          'popup': {
                            'background': '#000'
                          },
                          'button': {
                            'background': 'transparent',
                            'text': '#f1d600',
                            'border': '#f1d600'
                          }
                        },
                        'content': {
                          'href': '/privacy/'
                        }
                      })
                    });
                }
            });
        </script>

        {%- include head/favicons.html -%}

        {%- include head/social.html -%}
    </head>

    {%- capture body_class -%}
        layout-{{ page.layout }}{% if page.body_class %} page-{{ page.body_class }}{% elsif page.slug %} page-{{ page.slug | slugify }}{% endif %}
    {%- endcapture -%}
    <body class="{{ body_class }}">
        <header class="mast-header">
            {%- include nav.html -%}
        </header>

        {%- if page.slug == 'home' -%}
            {%- include home/hero.html -%}
        {%- endif %}
